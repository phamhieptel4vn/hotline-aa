{"version":3,"file":"rest-65f39e96.js","sources":["../../../.svelte-kit/adapter-node/chunks/rest.js"],"sourcesContent":["import axios from \"axios\";\nimport { p as public_env } from \"./shared-server.js\";\nimport Cookies from \"js-cookie\";\nconst API_HOST = public_env.PUBLIC_API_HOST;\nconst getItem = (key = \"\") => {\n  const data = Cookies.get(key);\n  try {\n    return JSON.parse(data);\n  } catch (err) {\n    return data;\n  }\n};\nconst authHeader = () => ({\n  Authorization: `Bearer ${getItem(\"token\")}`\n});\nconst client = axios.create({\n  baseURL: API_HOST,\n  headers: {\n    Authorization: `Bearer ${getItem(\"token\")}`,\n    \"Content-Type\": \"application/json\"\n  }\n});\nclass RestClient {\n  static get(path = \"\") {\n    return client({\n      method: \"GET\",\n      url: path,\n      headers: { ...authHeader() }\n    });\n  }\n  static post(path = \"\", data = {}, optionalHeader = {}) {\n    return client({\n      method: \"POST\",\n      url: path,\n      data,\n      headers: { ...authHeader(), ...optionalHeader }\n    });\n  }\n  static patch(path = \"\", data = {}) {\n    return client({\n      method: \"PATCH\",\n      url: path,\n      data: JSON.stringify(data),\n      headers: { ...authHeader() }\n    });\n  }\n  static put(path = \"\", data = {}) {\n    return client({\n      method: \"PUT\",\n      url: path,\n      data: JSON.stringify(data),\n      headers: { ...authHeader() }\n    });\n  }\n}\nclient.interceptors.request.use((config) => {\n  const requestConfig = config;\n  const { headers } = config;\n  requestConfig.headers = { ...headers, Authorization: `Bearer ${getItem(\"token\")}` };\n  return requestConfig;\n});\nclient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    const { response } = error;\n    const originalRequest = error.config;\n    if (response) {\n      if (response.status === 500)\n        ;\n      else {\n        return originalRequest;\n      }\n    }\n    return Promise.reject(error);\n  }\n);\nexport {\n  API_HOST as A,\n  RestClient as R\n};\n"],"names":[],"mappings":"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"}